!function(){function t(t){v.push(t),store.set("xx",v)}function n(){var t=$(".task-list");t.html(null);for(var n=0;n<v.length;n++)t.prepend(i(v[n],n));e(),c(),p()}function i(t,n){return'<li data-index="'+n+'"><input type="checkbox" class="complate" '+(t.tick?"checked":"")+'><p class="content">'+t.content+'</p><div class="right"><span class="delete r-main">删除</span><span class="detail r-main">详细</span></div></li>'}function e(){$(".delete.r-main").on("click",function(){confirm("确定删除？")&&a($(this).parent().parent().data("index"))})}function a(t){v.splice(t,1),s()}function s(){store.set("xx",v),n()}function c(){$(".detail.r-main").on("click",function(){var t=$(this).parent().parent().data("index");o(v[t],t)})}function o(t,n){var i='<div class="task-detail-mask"></div><div class="task-detail"><form class="up-task"><h2 class="content">'+t.content+'</h2><div class="input-item"><input type="text" class="dbContent"></div><div class="input-item"><textarea class="text">'+(t.text||"")+'</textarea></div><div class="remind input-item"><label for="b">提醒时间</label><input id="b" class="datetime" type="date" value="'+t.datetime+'"></div><div class="input-item"><button>更新</button></div><div class="close">X</div></form></div>';$(".container").append(i),l(),d(n),u()}function l(){$(".task-detail-mask,.close").on("click",function(){$(".task-detail-mask,.task-detail").remove()})}function d(t){$(".up-task").on("submit",function(i){i.preventDefault();var e={};e.content=$(this).find(".content").text(),e.text=$(this).find(".text").val(),e.datetime=$(this).find(".datetime").val(),r(e,t),$(".task-detail-mask,.task-detail").remove(),n()})}function u(){$(".up-task .content").on("dblclick",function(){var t=$(this),n=$(".container .up-task .dbContent");t.hide(),n.show(),n.focus(),n.on("blur",function(){console.log(1),t.show(),n.hide(),n.val()&&t.text($(this).val())})})}function r(t,n){v[n]=$.extend({},v[n],t),store.set("xx",v)}function p(){$(".complate").on("click",function(){var t=$(this).parent().data("index");v[t].tick?r({tick:!1},t):r({tick:!0},t)})}var v=[],f=$(".add-task");v=store.get("xx")||[],n(),f.on("submit",function(i){i.preventDefault();var e={};e.content=f.find("input").eq(0).val(),e.content&&(t(e),n(),f.find("input").eq(0).val(null))})}();